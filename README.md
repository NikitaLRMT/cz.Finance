# czFinance - Приложение для управления личными финансами

Современное веб-приложение для управления личными финансами с интеграцией Telegram-бота. Позволяет эффективно отслеживать доходы и расходы, ставить финансовые цели и анализировать свое финансовое состояние.

## Особенности проекта

- **Двойной интерфейс**: Web-интерфейс и Telegram-бот для максимального удобства
- **Трехслойная архитектура**: Четкое разделение на уровни обработки запросов, бизнес-логики и доступа к данным
- **Расширенная аналитика**: Детальный анализ доходов и расходов по категориям, периодам и источникам
- **Бюджетные цели**: Постановка и отслеживание финансовых целей по различным категориям
- **Список желаний**: Сохранение и приоритизация желаемых покупок
- **Безопасность**: JWT-аутентификация и хэширование паролей

## Технологический стек

### Backend
- **Язык**: Go (Golang)
- **Архитектура**: Трехслойная (handlers, services, repositories)
- **База данных**: PostgreSQL
- **Аутентификация**: JWT

### Frontend
- **Фреймворк**: React
- **UI-библиотека**: Material UI
- **Состояние**: React Context API

### Telegram-бот
- **Библиотека**: telebot (gopkg.in/telebot.v3)
- **Интеграция**: Прямое взаимодействие с API основного приложения

## Интерфейс Telegram-бота

Telegram-бот `@czfinancebot` предоставляет следующие функции:

### Доступные команды

- `/start` - Начать работу с ботом
- `/link email password` - Связать аккаунт Telegram с аккаунтом в приложении
- `/expense` - Добавить трату
- `/income` - Добавить поступление
- `/balance` - Посмотреть текущий баланс
- `/transactions` - Посмотреть последние транзакции
- `/category` - Фильтрация расходов по категории
- `/budget` - Просмотр бюджетных целей
- `/setbudget` - Установка бюджетной цели

### Примеры использования

**Добавление расхода:**
```
/expense
Продукты Пятерочка 1300 Еженедельная закупка
```

**Добавление дохода:**
```
/income
Зарплата 50000 Аванс
```

**Установка бюджета по категории:**
```
/setbudget Развлечения 5000
```

## Запуск проекта

### Предварительные требования
- Docker и Docker Compose
- Go 1.18+ (для локальной разработки)
- Node.js 14+ и npm (для локальной разработки фронтенда)
- PostgreSQL (для локальной разработки)

### Использование Docker Compose

1. **Клонирование репозитория:**
   ```bash
   git clone https://github.com/NikitaLRMT/cz.Finance.git
   cd cz.Finance
   ```

2. **Создание файла .env:**
   ```
   # Настройки сервера
   SERVER_PORT=8080
   LOG_LEVEL=info

   # Настройки базы данных
   DB_HOST=postgres
   DB_PORT=5432
   DB_USER=postgres
   DB_PASSWORD=postgres
   DB_NAME=finance
   DB_SSLMODE=disable

   # Настройки JWT
   JWT_SECRET=your-secret-key
   JWT_EXPIRES_IN=24

   # Настройки Telegram бота (опционально)
   TELEGRAM_BOT_TOKEN=your_telegram_bot_token
   ```

3. **Запуск через Docker Compose:**
   ```bash
   docker compose up -d
   ```

4. **Доступ к приложению:**
   - Frontend: http://localhost:3000
   - Backend API: http://localhost:8080/api

### Локальная разработка

#### Backend (Go)

1. **Настройка базы данных:**
   ```bash
   createdb finance
   ```

2. **Установка зависимостей:**
   ```bash
   go mod download
   ```

3. **Запуск бэкенда:**
   ```bash
   go run backend/main.go
   ```

#### Frontend (React)

1. **Установка зависимостей:**
   ```bash
   cd frontend
   npm install
   ```

2. **Запуск фронтенда:**
   ```bash
   npm start
   ```

#### Telegram-бот

1. **Создайте бота через @BotFather в Telegram и получите токен**

2. **Запуск бота:**
   ```bash
   export TELEGRAM_BOT_TOKEN=your_telegram_bot_token
   go run telegram/main.go
   ```

## Структура проекта

```
.
├── backend/               # Бэкенд приложения на Go
│   ├── configs/           # Конфигурации и настройки
│   ├── database/          # Инициализация БД и миграции
│   ├── handlers/          # HTTP обработчики
│   ├── middleware/        # Промежуточные обработчики
│   ├── models/            # Модели данных
│   ├── repositories/      # Доступ к данным
│   ├── routes/            # Настройка маршрутов API
│   ├── services/          # Бизнес-логика
│   └── utils/             # Вспомогательные функции
│
├── frontend/              # Фронтенд на React
│   ├── public/            # Статические файлы
│   └── src/
│       ├── components/    # React компоненты
│       ├── contexts/      # React контексты
│       ├── pages/         # Страницы приложения
│       └── services/      # Сервисы для работы с API
│
├── telegram/              # Telegram бот
│   ├── client/            # Клиент для работы с API
│   └── handlers/          # Обработчики команд бота
│
├── docker/                # Файлы Docker
├── uploads/               # Директория для загрузок (аватары, etc.)
└── docker-compose.yml     # Конфигурация Docker Compose
```
